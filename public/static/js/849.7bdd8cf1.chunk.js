"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[849],{563:function(e,t,r){r.r(t);var a=r(165),n=r(861),i=r(885),s=r(791),l=r(739),o=r(319),c=r(671),d=r(641),u=r(500),p=r(551),f=r(35),v=(r(822),r(784)),x=r(382),m=r(941),h=r(184);t.default=function(e){var t=(0,f.x)(),r=t.loading,g=t.sendRequest,j=t.cancelError,Z=t.errorState,y=(0,s.useContext)(v.Z),k=(y.userId,y.token),I=(0,l.s0)(),w=(0,p.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:"",isValid:!1}},!1),C=(0,i.Z)(w,2),b=C[0],P=C[1],T=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),r=new FormData,b.inputs)r.append(n,b.inputs[n].value);return e.prev=3,e.next=6,g("https://mern-api-production.up.railway.app/api/places","POST",r,{Authorization:"Bearer "+k});case 6:I("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Error ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[r&&(0,h.jsx)(x.Z,{asOverlay:!0}),(0,h.jsx)(m.Z,{show:Z,onClear:j}),(0,h.jsxs)("form",{className:"place-form",children:[(0,h.jsx)(o.Z,{id:"title",type:"text",label:"Title",placeholder:"Insert title ...",element:"input",errorText:"Please enter a valid title!",validators:[(0,u.hg)()],onInput:P}),(0,h.jsx)(o.Z,{id:"description",type:"textarea",label:"Description",placeholder:"Insert description ...",element:"textarea",errorText:"Please enter a valid description!(at lease 5 characters)",validators:[(0,u.CP)(5)],onInput:P}),(0,h.jsx)(o.Z,{id:"address",type:"input",label:"Address",placeholder:"Insert address ...",element:"input",errorText:"Please enter a valid address!",validators:[(0,u.hg)()],onInput:P}),(0,h.jsx)(d.Z,{onInput:P,center:!0,id:"image",errorText:"please provide an image"}),(0,h.jsx)(c.Z,{onClick:T,type:"submit",disabled:!b.isValid,children:"ADD PLACE"})]})]})}},641:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(885),n=r(791),i=r(671),s=r(184);var l=function(e){var t=(0,n.useState)(""),r=(0,a.Z)(t,2),l=r[0],o=r[1],c=(0,n.useState)(null),d=(0,a.Z)(c,2),u=d[0],p=d[1],f=(0,n.useState)(!1),v=(0,a.Z)(f,2),x=v[0],m=v[1];(0,n.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(l)}}));var h=(0,n.useRef)();return(0,s.jsxs)("div",{className:"from-control",style:{marginTop:"1rem",marginBottom:"1rem"},children:[(0,s.jsx)("input",{ref:h,type:"file",id:e.id,style:{display:"none"},accept:".jpg , .png, .jpeg",onChange:function(t){var r;t.target.files&&1===t.target.files.length?(r=t.target.files[0],o(r),m(!0)):m(!1),e.onInput(e.id,r,!x)}}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[u&&(0,s.jsx)("img",{src:u,alt:"Preview"}),!u&&(0,s.jsx)("p",{children:"Please pick an image!"})]}),(0,s.jsx)(i.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!x&&(0,s.jsx)("p",{children:e.errorText})]})}},822:function(){}}]);
//# sourceMappingURL=849.7bdd8cf1.chunk.js.map